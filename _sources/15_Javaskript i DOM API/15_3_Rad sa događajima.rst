DOM API - рад са догађајима
===========================

Већина динамичких клијентских веб-апликација подразумева да постоји некаква реакција на корисникову интеракцију са веб-страницом. Неки примери интеракције корисника са веб-страницом и одговарајуће реакције веб-странице могу бити:

- Корисник кликће на дугме и веб-страница приказује (претходно сакривену) навигацију са стране.
- Корисник попуњава поље формулара и веб-страница проверава коректност уноса.
- Корисник кликће на дугме за подношење формулара и веб-страница проверава коректност свих унетих података пре слања.
- Корисник превлачи једну од слика из галерије слике и веб-страница мења редослед приказивања слика.
- Корисник прелази курсором миша преко текста и веб-страница повећава величину фонта тог текста.

Када се нека од ових (и њима сличних) интеракција догоди на веб-страници, кажемо да се окида догађај (*event*). Сваки HTML елемент дефинише скуп догађаја који се може окинути над њиме. На пример, већина HTML елемената подржава догађај "*click*" који се окида када корисник кликне на тај елемент. Слично њему, постоје и догађаји "*mouseenter*" и "*mouseleave*" који се окидају када корисник пређе курсором миша преко елемента (први се окида први пут када се курсор нађе преко елемента, а други се окида први пут када курсор напусти елемент). Са друге стране, поља формулара могу имати неке себи-својствене догађаје као што је догађај "*change*" који се окида када корисник промени вредност неког поља.

.. infonote::

    **Напомена:** Интерфејс `Element <https://developer.mozilla.org/en-US/docs/Web/API/Element#events>`_ дефинише велики број ових догађаја. Међутим, и интерфејс `HTMLElement <https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement#events>`_ садржи неке корисне догађаје. Корисно је да проучиш документацију ових интерфејса и да упознаш њихове догађаје. Покушај да пронађеш називе догађаја који представљају честе интеракције које ти имаш са веб-апликацијама.

Имплементирање функционалности када се окине неки догађај је веома једноставно. Сваки HTML елемент дефинише метод *addEventListener* који користиш у ту сврху. Овај метод има два параметра: назив догађаја (ниска) и функцију која ће бити извршена када се тај догађај окине. 

Пример: На веб-страници се налази дугме „*Кликни ме!*“. Напиши JavaScript програм који у конзоли исписује поруку „*Клик!*“ када корисник кликне на дугме.

::

    Poglavlje4/38/index.html
    Poglavlje4/38/index.js

.. image:: ../../_images/web_153а.jpg
    :width: 780
    :align: center

Веома је важно да разумеш како JavaScript интерпретер извршава код из претходног примера. Примети да се, одмах по отварању веб-странице, у конзоли исписује порука „*Крај кода!*“, а да се порука „*Клик!*“ из функције *klikni_me* не исписује. Тек када кликнеш на дугме „*Кликни ме!*“, функција *klikni_me* се извршава и исписује се жељена порука. Другим речима, JavaScript интерпретер неће извршити код из прослеђене функције у тренутку позива метода *addEventListener* (за разлику од тога да позовеш функцију), већ само онда када се наведени догађај (у овом задатку, "*click*") окине над елементом над којим је овај метод позван. Ово можеш да разумеш као да позив метода *addEventListener* само каже JavaScript интерпретеру да запамти функцију која му се прослеђује (уз одговарајући догађај), а да ће њено позивање доћи тек касније (када се тај догађај окине).

Провежбај ово понашање кроз наредне задатке.

.. questionnote::

    **Задатак:** На веб-страници се налази слика угашене светиљке и два дугмета: „*укључи*“ и „*искључи*“. Напиши JavaScript програм који кликом на прво дугме мења фотографију на упаљену светиљку, а кликом на друго дугме мења фотографију на угашену светиљку.

::

    Poglavlje4/39/index.html
    Poglavlje4/39/index.js

.. image:: ../../_images/web_153b.jpg
    :width: 780
    :align: center

.. questionnote::

    **Задатак:** На веб-страници се налазе два једнолинијска текстуална поља: *„први број“* и *„други број“*, четири ексклузивна дугмета са основним аритметичким операцијама: *„+“* (сабирањем), *„-“* (одузимањем), *„*“* (множењем) и *„/“* (дељењем), обично дугме „*Израчунај*“ и пасус са текстом „*Резултат*“. Напиши JavaScript програм који кликом на дугме „*Израчунај*“ чита бројевне вредности из једнолинијских текстуалних поља, а затим у пасус уписује резултат извршавања одабране аритметичке операције.

::

    Poglavlje4/40/index.html
    Poglavlje4/40/index.js

.. image:: ../../_images/web_153c.jpg
    :width: 780
    :align: center

.. questionnote::

    **Задатак:** На веб-страници се налази текстуални садржај величине текста :math:`10pt`. Напиши JavaScript програм који, када корисник преже курсором преко текста, увећава величину фонта тог текста на :math:`14pt`. Приликом „напуштања“ текста, програм треба да врати величину текста на претходну.

::

    Poglavlje4/41/index.html
    Poglavlje4/41/index.js

.. image:: ../../_images/web_153d.jpg
    :width: 780
    :align: center

.. infonote::

    **Напомена:** Постоји и метод `removeEventListener <https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener>`_ који се користи да уклони функцију која је регистрована методом *addEventListener*. Обе функције имају идентичне параметре који се морају поклопити (као и чвор-објекат над којим се позивају) како би се уклонила исправна функција. Овај метод наводимо како бисмо ти скренули пажњу на његово постојање, али уклањање функција којима се реагује на догађаје је релативно ретка операција у развоја веб-апликација, те се нећемо удубљивати у функционисање овог метода.

Документацију за метод можеш пронаћи на адреси https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener. Као што ћеш приметити, овај метод је веома моћан и ми смо у овој лекцији тек окрзнули функционалности које нам он пружа. Ипак, оно што си научио ће ти бити довољно да имплементираш велики број динамичких клијентских веб-апликација.
